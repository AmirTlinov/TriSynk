# Git Projects Operating Model

## Board Layout
1. **Backlog (Linked to Roadmap):** auto-filled from [issues.md](issues.md) when `status=draft`.
2. **Spec Work:** tasks needing updates to [vision](vision.md), [core spec](core-spec.md), or [architecture](architecture.md).
3. **Execution:** implementation + verification tasks; blocked cards must cite capability/policy reason.
4. **Review & Proof:** formal verification, coverage, performance sign-off.
5. **Release:** only cards with telemetry + proof artifacts attached.

## Automation Rules
- Every card references at least one doc section anchor (e.g., `core-spec.md#3-intermediate-representation`).
- CI bots update card metrics (coverage, perf delta) after each pipeline run.
- When an issue closes, board card auto-moves to Release and records commit hash.

## Reporting
- Weekly snapshots stored in `.agents/context/YYYY-MM-DD_projects_context.jsonl`.
- Metrics exported: cycle time, verification duration, performance regressions.

## Governance
- Board steward ensures backlog stays â‰¤2 phases ahead of roadmap.
- Security reviews cannot be bypassed; cards without capability manifests are rejected.

## CI Integration
- Workflow [.github/workflows/ci.yml](../.github/workflows/ci.yml) blocks merges unless documentation, intent, and issue linting pass.
- Status checks surface coverage/perf metrics collected by future steps referenced in [roadmap.md](roadmap.md).
- `reports/metrics.json` is regenerated by [scripts/measure_metrics.sh](../scripts/measure_metrics.sh); CI enforces thresholds via [scripts/check_metrics.py](../scripts/check_metrics.py) and archives history through [scripts/update_metrics_history.py](../scripts/update_metrics_history.py) (`reports/history/metrics_history.jsonl`).

## Issue & Intent Export
- Script [scripts/export_graph.py](../scripts/export_graph.py) emits `data/outbox/issues_intents.json`, unifying docs/issues.md and intents/* for GitHub Projects automation.
- Export file feeds future bots that open/triage GitHub Issues, ensuring every card links back to documentation anchors.

## Synchronization Workflow
- [scripts/sync_issues.py](../scripts/sync_issues.py) ingests the export and builds GitHub-ready payloads. Dry-run mode (default) prints JSON preview; `--apply` pushes via API.
- Configuration uses `.env.example` (`GITHUB_REPO`, `GITHUB_TOKEN`). Never commit actual secrets; CI workflows rely on repository secrets instead.
- Workflow [.github/workflows/sync-issues.yml](../.github/workflows/sync-issues.yml) runs nightly + on demand using the `SYNC_GH_TOKEN` secret to mirror docs/issues into GitHub Issues/Projects.
- Local development stores the token in `.agents/secrets/SYNC_GH_TOKEN` (ignored by git) so scripts can run `--apply` in mock mode without exposing credentials; production deployments must set the repository secret `SYNC_GH_TOKEN`.
- Each synchronized issue automatically embeds linked intents so GitHub cards stay in lockstep with `docs/issues.md` and `intents/*`, and issues are closed/reopened according to `meta.state` in intents.
- Project board automation uses [scripts/sync_projects.py](../scripts/sync_projects.py) + [docs/github-app.md](github-app.md). Provide `PROJECT_ID`, `PROJECT_FIELD_STATUS_ID`, and `PROJECT_STATUS_MAP` so the GraphQL workflow updates Projects v2 items.
